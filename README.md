# GooseDBMS
GooseDBMS. Free cloud DBMS based on Google products

<p align="center">
  <img width="640" alt="github" src="https://github.com/gttrcr/GooseDBMS/assets/48126017/8cd57f03-a623-4230-96f0-22d830522e47">
</p>

GooseDMBS was created to get around the problem of building cloud database-based applications. The data entry takes place through the automatic sending of a Google form. The solution is particularly useful for all those push only applications such as MQTT or one-way communications (weather stations, IoT devices, sending status data, ...). The entire solution does not require writing specific code but only configuring a file.

## Usings
```c#
using Goose;
using Goose.Type.Config;
using Goose.Type.DBMS;
```

## Configuration file
Consider the following configuration file
```json
{
  "ClientSecretFilePath": "client_secret.json",
  "Tables": [
    {
      "Name": "GooseTable1",
      "Columns": [
        {
          "Entry": 5497120025,
          "Value": "name",
          "Key": "5g9824jk"
        },
        {
          "Entry": 223105871,
          "Value": "surname",
          "Key": "kldp33am"
        }
      ],
      "FormID": "298h4gGdsfgGr36u367h5h52hBHsdh55hy4hqhs4sr-hHRH56jRh",
      "PrefilledFormID": "2948jgkjrhXDtH7653563he56453hH4hse4SHsh40l9k3fD",
      "SpreadsheetID": null
    }
  ]
}
```
|          Key           |                              Value                               | Optional? |
| :--------------------: | :--------------------------------------------------------------: | :-------: |
|  ClientSecretFilePath  |               path of the json client secret file                |    YES    |
|         Tables         |                       list of table object                       |    NO     |
|      Tables.Name       |                        name of the table                         |    NO     |
|     Tables.Columns     |                 list of columns for every table                  |    NO     |
|     Tables.FormID      |            id of the form corresponding to the table             |    YES    |
| Tables.PrefilledFormID | id of the prefilled form for the form corresponding to the table |    NO     |
|  Tables.SpreadsheetID  |                id of the spreadsheet (unmanaged)                 |    YES    |
|  Tables.Columns.Entry  |  entry number corresponding to the prefilled field of the form   |    NO     |
|  Tables.Columns.Value  |             string value of the column (column name)             |    NO     |
|   Tables.Columns.Key   |         string representing the question id of the form          |    NO     |

The configuration file can be automatically generated by a utility function in GooseDBMS. Consider the following example
```c#
GooseConfig.CreateConfig("goose_config.json",
                "client_secret.json",
                new List<string>() { "https://docs.google.com/forms/d/e/2948jgkjrhXDtH7653563he56453hH4hse4SHsh40l9k3fD/viewform?usp=pp_url&entry.5497120025=name&entry.223105871=surname" },
                new List<string>() { "298h4gGdsfgGr36u367h5h52hBHsdh55hy4hqhs4sr-hHRH56jRh" });
```
The static function ```GooseConfig.CreateConfig``` takes as arguments
1. the path of the configuration json file you want for your GooseDBMS application
2. the path of the json client secret file
3. the list of prefilled url for every form
4. the list of form id

Pay attention that in GooseDBMS, **every form is a table**. When the ```goose_config.json``` is saved, then GooseDBMS instance can be created.

## Client application
In the case of client application, the user can only just push data to DB. So, ```ClientSecretFilePath``` and ```FormID``` should be null and just ```PrefilledFormID``` will be used to create the link to push data.
```c#
DBMS gooseDBMS = new("goose_config_new.json");  //instance of GooseDBMS
gooseDBMS.Insert("tablename", new List<string>() { "colum1 value", "column2 value" });  //this equivalent to: INSERT INTO tablename (name, surname) VALUES ('column1 value', 'column2 value')
```

## Server application
In the case of server application or master application, the user is able to push and pull data to DB. So ```ClientSecretFilePath``` and ```FormID``` must be not null and valid to create a Google service able to read form body and responses. In any case, the **data entered into the database cannot be modified** in form response but **soon there will be the possibility of replacing previous data with updated data so as to also implement the update functionality as in a real database**.
```c#
DBMS gooseDBMS = new("goose_config_new.json");  //instance of GooseDBMS
gooseDBMS.Insert("tablename", new List<string>() { "colum1 value", "column2 value" });  //this equivalent to: INSERT INTO tablename (name, surname) VALUES ('column1 value', 'column2 value')
GooseTable? gooseTable = gooseDBMS.Select("SELECT * FROM tablename WHERE name = 'some name value'");  //literally the sql SELECT statement

gooseDBMS.DataReceivedCallback = (gooseDB, previousGooseDB, differenceGooseDB) =>  //callback triggered by new data on DB
{
    Console.WriteLine(differenceGooseDB);
};
```
